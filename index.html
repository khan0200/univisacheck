<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visa Status Checker</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css?v=20260131">
    <!-- Favicon Suppress -->
    <link rel="icon" href="data:,">
</head>
<body>

    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="container-fluid main-wrapper p-4">

        <!-- Main Content -->
        <div class="row g-3">
            <!-- Toolbar -->
            <div class="col-12">
                <div class="glass-panel toolbar-section d-flex flex-wrap align-items-center gap-3">
                    <!-- Add Button -->
                    <button class="btn btn-primary d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#addStudentModal">
                        <i class="bi bi-plus"></i>
                        <span>Add</span>
                    </button>
                    
                    <!-- Search Box -->
                    <div class="search-box position-relative flex-grow-1" style="max-width: 320px;">
                        <i class="bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 text-secondary" style="font-size: 14px;"></i>
                        <input type="text" id="searchInput" class="form-control form-control-glass ps-5 w-100" placeholder="Search...">
                    </div>
                    <button id="checkSelectedBtn" type="button" class="btn btn-primary d-none d-flex align-items-center gap-2">
                        <i class="bi bi-arrow-repeat"></i>
                        <span>Check Students</span>
                    </button>

                    <!-- Tabs - Using buttons for better mobile touch support -->
                    <div class="nav-tabs-wrapper ms-auto d-flex align-items-center gap-2">
                        <div class="nav nav-pills nav-glass gap-0" id="statusTabs">
                            <button type="button" class="nav-link active" data-tab="pending">Pending</button>
                            <button type="button" class="nav-link" data-tab="application">Application</button>
                            <button type="button" class="nav-link" data-tab="cancelled">Cancelled</button>
                            <button type="button" class="nav-link" data-tab="approved">Approved</button>
                        </div>
                        <span class="text-secondary small fw-medium text-nowrap ms-2" id="studentCount">0</span>
                    </div>
                </div>
            </div>

            <!-- Table Section -->
            <div class="col-12">
                <div class="glass-panel p-0 rounded-3 overflow-hidden">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 align-middle custom-table">
                            <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Passport</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Applied</th>
                                    <th scope="col">Checked</th>
                                    <th scope="col" class="text-center th-select">Select</th>
                                    <th scope="col" class="text-end pe-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                        <!-- Loading State -->
                        <div id="loadingState" class="text-center py-5">
                            <div class="spinner-border text-primary mb-3" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="text-secondary small mb-0">Loading students...</p>
                        </div>
                        <!-- Empty State -->
                        <div id="emptyState" class="text-center py-5 d-none">
                            <div class="text-secondary mb-2">
                                <i class="bi bi-inbox"></i>
                            </div>
                            <p class="text-secondary small mb-0">No students found</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Student Modal -->
    <div class="modal fade" id="addStudentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-panel border-0 rounded-4">
                <div class="modal-header border-bottom-0 pb-0">
                    <h5 class="modal-title fw-bold" id="modalTitle">Add New Student</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-4">
                    <form id="studentForm">
                        <input type="hidden" id="editMode" value="false">
                        <div class="mb-3">
                            <label for="studentId" class="form-label small fw-semibold text-secondary">Student ID</label>
                            <input type="text" class="form-control form-control-glass rounded-3" id="studentId" placeholder="e.g. 2301050">
                        </div>
                        <div class="mb-3">
                            <label for="fullName" class="form-label small fw-semibold text-secondary">Full Name</label>
                            <input type="text" class="form-control form-control-glass rounded-3" id="fullName" required placeholder="e.g. ISOKOV MAGRURBEK">
                        </div>
                        <div class="mb-3">
                            <label for="passport" class="form-label small fw-semibold text-secondary">Passport Number</label>
                            <input type="text" class="form-control form-control-glass rounded-3" id="passport" required placeholder="e.g. FB1002884">
                        </div>
                        <div class="mb-3">
                            <label for="birthday" class="form-label small fw-semibold text-secondary">Birthday</label>
                            <input type="text" class="form-control form-control-glass rounded-3" id="birthday" required placeholder="YYYY-MM-DD" maxlength="10">
                            <div class="form-text small">Format: YYYY-MM-DD</div>
                        </div>
                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-primary rounded-pill py-2">
                                <span id="submitBtnText">Save Student</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-panel border-0 rounded-4">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold">Student Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-0">
                    <div class="text-center mb-4">
                        <div class="avatar-placeholder bg-light rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-person fs-1 text-secondary"></i>
                        </div>
                        <h5 class="fw-bold mb-1" id="detailsName">Student Name</h5>
                        <span class="badge bg-light text-dark border px-2 py-1 rounded-2" id="detailsPassport">PASSPORT</span>
                    </div>
                    
                    <div class="row g-3 mb-4">
                        <div class="col-6">
                            <div class="p-3 bg-light-glass rounded-3 h-100 border">
                                <small class="text-secondary d-block mb-1">Status</small>
                                <div id="detailsStatus"></div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-light-glass rounded-3 h-100 border">
                                <small class="text-secondary d-block mb-1">Birthday</small>
                                <p class="mb-0 fw-medium" id="detailsBirthday">--</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-light-glass rounded-3 h-100 border">
                                <small class="text-secondary d-block mb-1">Application Date</small>
                                <p class="mb-0 fw-medium" id="detailsAppDate">--</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-light-glass rounded-3 h-100 border">
                                <small class="text-secondary d-block mb-1">Last Checked</small>
                                <p class="mb-0 fw-medium" id="detailsLastChecked">--</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- App JS -->
    <script type="module" src="app.js?v=20260131"></script>
</body>
</html>
